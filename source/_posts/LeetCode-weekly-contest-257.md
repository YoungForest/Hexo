---
title: LeetCode weekly contest 257
date: 2021-09-06 23:15:10
tags:
- Competitive Programming
categories:
- LeetCode
---


| Rank |	Name |	Score |	Finish Time | 	Q1 (3) |	Q2 (4) |	Q3 (5) |	Q4 (6)|
|--|--|--|--|--|--|--|--|
| 262 / 12542 | YoungForest | 18 | 2:08:15 | 0:06:21  ğŸ1 | 0:12:18 |  0:24:28 | 1:28:15  ğŸ7 |

ä¹…è¿çš„ä¸ç”¨æ‰“å¡äº†ã€‚ä¹‹å‰æ‰“äº†3å‘¨å¡ï¼Œå®åœ¨æ˜¯é­ä¸ä½äº†å‘€ã€‚å·¥ä½œä¹‹åï¼ŒèŠ±åœ¨åˆ·é¢˜ä¸Šçš„ç²¾åŠ›å’Œæ—¶é—´éƒ½å°‘äº†å¾ˆå¤šã€‚å¾ˆå¤šå¡éƒ½æ˜¯è®©npyæ‰“çš„ï¼Œæˆ–è€…å¹²è„†æŠ„ä¸€ä»½ã€‚ä¸€ä»½ä»˜å‡ºä¸€ä»½å›æŠ¥ã€‚å­¦å¦‚é€†æ°´è¡ŒèˆŸï¼Œä¸è¿›åˆ™é€€ã€‚æˆ‘å‘¨èµ›æˆç»©ä¸‹é™ç¡®å®æ˜¯è‡ªå·±å®åŠ›ä¸‹é™äº†ã€‚è™½ç„¶æˆ‘å¹¶ä¸æ‰“ç®—æ”¹å˜ï¼Œå¹¶ä¸”æ…¢æ…¢æ¥å—äº†è¿™ä¸ªäº‹å®ã€‚ä½†æ˜¯æˆ‘ä¼šåšæŒæ‰“å‘¨èµ›å’Œå‘†åœ¨æ®‹é…·ç¾¤é‡Œï¼Œä¿æŒåŸºæœ¬çš„åšé¢˜æ‰‹æ„Ÿå³å¯ï¼Œä¸éœ€è¦å¯¹è‡ªå·±æœ‰å¤ªé«˜è¦æ±‚ã€‚

æœ€è¿‘é™¤äº†å·¥ä½œï¼ŒèŠ±äº†å¾ˆå¤šæ—¶é—´åœ¨æŠ•èµ„ç†è´¢ä¸Šã€‚

ä¸€æ–¹é¢å­¦ä¹ ç›¸å…³çŸ¥è¯†ã€‚æ¯”å¦‚ å…³æ³¨äº† å–œæ¬¢ç©åŸºé‡‘çš„å°ç‘œå“¥ çš„Bç«™å’Œå¾®ä¿¡å…¬ä¼—å·ï¼Œè¿˜æœ‰ **è®¤çœŸçš„å¤©é©¬** çš„Bç«™å’Œå¾®ä¿¡å…¬ä¼—å·ã€‚
å…³æ³¨äº†æœ‰å¤§åŠå¹´æ—¶é—´äº†ã€‚å°ç‘œå“¥å¦¥å¦¥çš„éŸ­èœä¸€æšï¼Œå…³æ³¨ä»–æœ‰3ç‚¹åŸå› ï¼šä»–æ¯æ—¥æ›´æ–°å¤ç›˜è§†é¢‘ï¼Œååˆ†åšæŒå’Œå‹¤åŠ³ï¼›è§†é¢‘å†…å®¹å¾ˆå¼€å¿ƒï¼ˆå‡†ç¡®åœ°è¯´ï¼Œçœ‹ä»–äºé’±å¾ˆå¼€å¿ƒï¼‰ï¼Œå¯ä»¥å½“ä½œå¨±ä¹åŒºUPçœ‹ï¼›ä»–çŠ¯äº†å¾ˆå¤šéŸ­èœçš„è¯¯åŒºå’Œå¤§å¿Œï¼Œæˆ‘ä»¬å¯ä»¥ä»ä»–çš„å¤±è´¥ä¸­å­¦ä¹ æ•™è®­ï¼Œè€Œä¸éœ€è¦è‡ªå·±å»å¤±è´¥ã€‚
å¤©é©¬ æ˜¯å¦¥å¦¥çš„çŸ¥è¯†å‹å’Œä¿å®ˆå‹UPä¸»ï¼Œæ¯”è¾ƒç¬¦åˆæˆ‘çš„éœ€æ±‚å’Œè§‚ç‚¹ã€‚ä»–å¾®ä¿¡å…¬ä¼—å·ä¹Ÿæ˜¯æ—¥æ›´ï¼Œæ¯å¤©æ—©ä¸Š8ç‚¹å‡†æ—¶æ›´æ–°ã€‚æ›´æ–°æ–‡ç« æœ«å°¾æœ‰ä¼°å€¼è¡¨ï¼Œé€šè¿‡å…¶å¯ä»¥ä¹°ä½ä¼°ã€å–é«˜ä¼°ã€‚ä»–çš„æ–‡ç« å’Œè§†é¢‘ä¹Ÿæ˜¯ä»¥å¹²è´§ä¸ºä¸»ï¼Œå€¼å¾—åå¤å­¦ä¹ å’Œè§‚çœ‹ã€‚
åŒæ—¶å…³æ³¨äº† YouTube çš„ â€œNaNaè¯´ç¾è‚¡â€œã€‚ä¸»è¦è®²çš„éƒ½æ˜¯ç¾è‚¡å¤§ç›˜çš„å˜åŠ¨ã€‚æˆ‘ä¹‹å‰ä¹°è¿‡200å…ƒ çº³æŒ‡100 å’Œ æ ‡æ™®500. æ¶¨äº†ä¸€äº›å°±å–äº†ã€‚é”™è¿‡äº†åé¢çš„è¡Œæƒ…ã€‚ç¾è‚¡ç¡®å®æ˜¯é•¿ç‰›ï¼Œå’Œ Aè‚¡æ²¡æ³•æ¯”ã€‚ç°åœ¨è™½ç„¶ç»§ç»­æ¶¨ï¼Œä½†å·²ç»å†å²æ–°é«˜äº†ï¼Œæˆ‘ä¹Ÿä¸æ•¢å†ä¹°äº†ã€‚
åŒæ—¶é˜…è¯»æŠ•èµ„ä¹¦ç±ã€‚ä¹‹å‰è¯»äº†[ã€Šå°ç‹—é’±é’±ã€‹](https://book.douban.com/subject/3576486/)ï¼Œæœ€è¿‘è¯»å®Œäº†[ã€Šå°ä¹Œé¾Ÿçš„æŠ•èµ„æ™ºæ…§ã€‹](https://book.douban.com/subject/26948036/)å’Œ[ã€Šè‚¡ç¥¨å¤§ä½œæ‰‹å›å¿†å½•ã€‹](https://book.douban.com/subject/5382213/)ã€‚æˆ‘åœ¨[è±†ç“£](https://www.douban.com/people/141835199/)å‡å†™ç®€çŸ­çš„ä¹¦è¯„ã€‚
å…¶ä¸­ã€Šå°ä¹Œé¾Ÿã€‹æ˜¯æˆ‘è§‰å¾—æœ€æœ‰ç”¨çš„ä¸€æœ¬ä¹¦ï¼Œå°¤å…¶æ˜¯å¯¹äºé•¿æœŸï¼ˆ10å¹´ä»¥ä¸Šï¼‰çš„æŠ•èµ„ã€‚æ‰“ç®—ä»¥åå‡†å¤‡é€€ä¼‘é’±çš„æ—¶å€™æŒ‰ç…§å…¶æŠ•èµ„ã€‚ç°åœ¨å› ä¸ºè¦å‡†å¤‡ä¹°æˆ¿å‡ºå›½çš„äº‹å„¿ï¼Œæš‚æ—¶è¿˜æ²¡æœ‰è¶³å¤Ÿçš„é•¿æœŸèµ„é‡‘ã€‚çŸ­æœŸåŸºæœ¬éƒ½è¦ç”¨ã€‚

å¦ä¸€æ–¹é¢è¿›è¡Œå®è·µã€‚æŠŠè‡ªå·±çš„èµ„äº§åˆ†ä¸º4ä¸ªéƒ¨åˆ† çµæ´»å–ç”¨ï¼ˆç°é‡‘ï¼Œè´§å¸åŸºé‡‘ï¼‰ã€ä¿å®ˆçš„å€ºå·åŸºé‡‘ å’Œ å›ºæ”¶ï¼ˆå®šæœŸï¼‰ã€åé£é™©çš„è‚¡ç¥¨åŸºé‡‘ï¼ˆä»¥å®½åŸºæŒ‡æ•° å’Œ è¡Œä¸šæŒ‡æ•° ä¸ºä¸»ï¼‰ã€‚
åŠå¹´å‰å†™è¿‡ä¸€ä¸ª[è‡ªå·±çš„æŠ•èµ„æ•…äº‹](https://youngforest.github.io/2021/03/22/investment/)ï¼Œç°åœ¨ï¼Œæˆ‘å¯ä»¥å¤§èƒ†çš„è¯´æˆ‘çš„çŸ¥è¯†å’Œç»éªŒæ›´åŠ ä¸°å¯Œå’Œä¸“ä¸šäº†ã€‚è™½ç„¶å¹¶æ²¡æœ‰æ”¶ç›Šå¤šå°‘ï¼Œä½†å·¥ä½œä¹‹åéšç€æœ¬é‡‘çš„å¢åŠ ï¼ŒæŠ•èµ„ç†è´¢å˜å¾—æ›´åŠ é‡è¦äº†ã€‚
ç°åœ¨æˆ‘æ€»çš„è‚¡ç¥¨ä»“ä½è¾ƒä½ï¼Œå¤§æ¦‚ä¸åˆ° 1/3ï¼Œä»¥å…¶ä»–3ç§ä¿å®ˆæŠ•èµ„ä¸ºä¸»ã€‚

## 1995. Count Special Quadruplets

ç­¾åˆ°é¢˜ã€‚æš´åŠ›æšä¸¾å³å¯ã€‚ä¸è¿‡å› ä¸ºç€æ€¥ï¼Œæ²¡ä»”ç»†çœ‹é¢˜ï¼Œå¿½ç•¥äº†index é€’å¢çš„è¦æ±‚ï¼Œæ“…è‡ªåŠ äº†æ’åºï¼Œå¯¼è‡´WAä¸€å‘ã€‚

```python
class Solution:
    def countQuadruplets(self, nums: List[int]) -> int:
        seen = set()
        n = len(nums)
        # print(nums)
        for i in range(n):
            for j in range(i + 1, n):
                for k in range(j + 1, n):
                    for l in range(k + 1, n):
                        if nums[i] + nums[j] + nums[k] == nums[l]:
                            # print((i, j, k, l))
                            seen.add((i, j, k, l))
        return len(seen)
```

æ—¶é—´å¤æ‚åº¦: O(n^4),
ç©ºé—´å¤æ‚åº¦: O(n)ã€‚

## 1996. The Number of Weak Characters in the Game

åšè¿™é¢˜çš„æ—¶å€™ï¼Œæˆ‘å°±è§‰çš„å®ƒæœ‰äº›åƒ[354. Russian Doll Envelopes](https://leetcode.com/problems/russian-doll-envelopes/)ã€‚
å…ˆæ’åºï¼ŒæŒ‰ç…§ä¸€ç»´é€’å‡ï¼Œå¦ä¸€ç»´é€’å¢çš„æ–¹å¼ã€‚
ç„¶åéå†ï¼Œå› ä¸ºå‰é¢çš„éƒ½ä¿è¯ç¬¬ä¸€ç»´å¤§äºç­‰äºå½“å‰äº†ï¼Œåªéœ€è¦çœ‹å‰é¢ç¬¬äºŒç»´æœ€å¤§çš„å°±å¯ä»¥äº†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç¬¬äºŒç»´æ’åºè¦é€’å¢çš„åŸå› ï¼Œåœ¨ç¬¬ä¸€ç»´ç›¸ç­‰çš„æ—¶å€™ï¼Œç¬¬äºŒä½å¤§çš„è¦æ’åé¢ï¼Œæ‰ä¸ä¼šå½±å“éå†æ—¶çš„æ¯”è¾ƒè¿‡ç¨‹ã€‚

```cpp
class Solution {
public:
    int numberOfWeakCharacters(vector<vector<int>>& p) {
        sort(p.begin(), p.end(), [](const auto& lhs, const auto& rhs) -> bool {
            if (lhs[0] != rhs[0]) {
                return lhs[0] > rhs[0];
            } else {
                return lhs[1] < rhs[1];
            }
        });
        int ans = 0;
        int maxDefense = 0;
        for (const auto& c : p) {
            if (maxDefense > c[1]) {
                ++ans;
            }
            maxDefense = max(maxDefense, c[1]);
        }
        return ans;
    }
};
```

æ—¶é—´å¤æ‚åº¦: O(nlogn),
ç©ºé—´å¤æ‚åº¦: O(log n).

## 1997. First Day Where You Have Been in All the Rooms

æœ¬é¢˜å¹¸è¿çš„å‘ç°äº†é—®é¢˜çš„æœ¬è´¨ï¼Œå¾ˆå¿«å¹¶ä¸”ä»£ç è¡Œæ•°å¾ˆå°‘åœ°è§£å†³äº†é—®é¢˜ã€‚
å¦åˆ™æœ€åä¸€é¢˜å¯èƒ½æ²¡æ—¶é—´Debugäº†ã€‚

æ³¨æ„åˆ°`0 <= nextVisit[i] <= i`ï¼Œå› æ­¤å¥‡æ•°æ¬¡çš„æ—¶å€™å¿…ç„¶æ˜¯è¦å¾€å›èµ°/å‘†åœ¨åŸåœ°ã€‚
å¶æ•°æ¬¡åªèƒ½å‘å‰èµ°ä¸€æ­¥ã€‚æ„å‘³ç€å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡ï¼ˆå…¶å®å¯ä»¥æ‰©å±•åˆ°å¥‡æ•°æ¬¡ï¼‰èµ°åˆ°ä½ç½®`i`æ—¶ï¼Œä¹‹å‰çš„æ‰€æœ‰æ ¼å­éƒ½å¿…ç„¶èµ°è¿‡å¶æ•°æ¬¡ã€‚
å› æ­¤çŠ¶æ€è½¬ç§»æ–¹ç¨‹æ˜¯ï¼š
`dp(i) = dp(i - 1) + 1 + (dp(i - 1) - dp(nextVisit[i-1])) + 1`,
å³ ç¬¬ä¸€æ¬¡èµ°åˆ°å‰ä¸€ä¸ªä½ç½®ï¼Œèµ°ä¸€æ­¥ï¼Œé€€å›åˆ°nextVisit[i-1]ï¼Œå†æ¬¡èµ°åˆ°å‰ä¸€ä¸ªä½ç½®ï¼Œå†å¤šèµ°ä¸€æ­¥åˆ°å½“å‰ä½ç½®ã€‚

```python
class Solution:
    def firstDayBeenInAllRooms(self, nextVisit: List[int]) -> int:
        MOD = 10**9 + 7
        @cache
        def dp(i):
            if i == 0: return 0
            return (dp(i-1) * 2 + 2 - dp(nextVisit[i-1])) % MOD
        n = len(nextVisit)
        return dp(n-1)
```

æ—¶é—´å¤æ‚åº¦: O(N),
ç©ºé—´å¤æ‚åº¦: O(N).

## 1998. GCD Sort of an Array

è§‚å¯Ÿäº¤æ¢è§„åˆ™ï¼Œå¯ä»¥å‘ç°äº¤æ¢çš„ä½ç½®å…¶å®æ˜¯ä¸€ä¸ªå¹¶æŸ¥é›†ï¼Œ2ä¸ªå…ƒç´ å¯ä»¥é€šè¿‡ç¬¬3ä¸ªå…ƒç´ äº’æ¢ã€‚
é—®é¢˜è½¬æ¢æˆï¼ŒåŸå§‹ä½ç½®è¦æ¢åˆ°æ’åºåçš„ä½ç½®ï¼Œéœ€è¦ç»è¿‡ä¸€ç³»åˆ—å…ƒç´ çš„äº¤æ¢ï¼Œè¿™äº›å…ƒç´ å¿…é¡»åœ¨åŒä¸€ä¸ªé›†ï¼ˆcomponentï¼‰é‡Œã€‚
åœ¨åŒä¸€ä¸ªé›†çš„å……åˆ†å¿…è¦æ¡ä»¶æ˜¯ gcd å¤§äº 1ã€‚

å› æ­¤ï¼Œä¸€ä¸ªç›´æ¥çš„æƒ³æ³•ï¼ˆä½†æ˜¯æ˜¾ç„¶ä¼šTLEï¼‰æ˜¯ï¼š
1. ä¸¤ä¸¤ç®—gcd, æ›´æ–°union-findï¼›
2. æ’åºåŸå§‹æ•°ç»„ï¼Œæ‰¾åˆ°å¯¹åº”çš„æ’åºåçš„ä½ç½®ï¼›
3. æ ¹æ®dfsåŸåˆ™ï¼Œåˆ¤æ–­å“ªäº›å…ƒç´ å¿…é¡»åœ¨åŒä¸€é›†ï¼Œç„¶åç”¨ä¹‹å‰ç®—å¥½çš„union-findå»éªŒè¯ã€‚

æ—¶é—´å¤æ‚åº¦ä¸º: O(N^2 + N log N + N).

å¤æ‚åº¦ç“¶é¢ˆåœ¨ç¬¬ä¸€æ­¥çš„è®¡ç®—union-findè¿™é‡Œã€‚æˆ‘ä»¬å°è¯•ä¼˜åŒ–å®ƒã€‚
è§‚å¯Ÿæ•°æ®è§„æ¨¡ï¼š`2 <= nums[i] <= 10^5`ï¼Œæ„å‘³ç€æˆ‘ä»¬å¯ä»¥è®¡ç®—æ¯ä¸ªå…ƒç´ çš„å› å­ï¼Œç„¶åæŠŠç›¸åŒå› å­çš„å…ƒç´ é€šè¿‡å› å­uniteèµ·æ¥ã€‚è¿™é‡Œæœ‰ä¸ªå‘ï¼Œæˆ‘ä»¬ä¸ä»…éœ€è¦è¿æ¥å°å› å­ï¼Œè¿˜éœ€è¦æŠŠç›¸åº”çš„å¤§å› å­è¿æ¥èµ·æ¥ã€‚å¯ä»¥æŠŠå¹¶æŸ¥é›†çš„æ•°ç»„æ‰©å¤§ï¼Œæ‰©å¤§åçš„ä½ç½®ç”¨æ¥è¡¨ç¤ºå› å­ï¼Œç”¨ä¸€ä¸ª+nåç§»è¡¨ç¤ºã€‚
æ—¶é—´å¤æ‚åº¦é™ä¸º O(N * sqrt(num)), è¿™é‡Œå¤§æ¦‚æ˜¯`10^7`, å…¶å®è¿˜æ˜¯å¯èƒ½ä¼šè¶…æ—¶çš„ã€‚è¿™ä¹Ÿæ˜¯æˆ‘æœ¬é¢˜7æ¬¡ç½šæ—¶çš„åŸå› ï¼Œåœ¨TLEçš„è¾¹ç¼˜ç–¯ç‹‚è¯•æ¢ã€‚
æ®‹é…·ç¾¤å‹æç¤ºï¼šç¬¬å››é¢˜å’Œ952. Largest Component Size by Common Factor å¾ˆåƒï¼Œè¦æŒ‰å› æ•°å»ä¼˜åŒ–ï¼Œä¸ç„¶ä¼štleåˆ°æ­»ã€‚ä¸è¿‡æˆ‘é€šè¿‡æŠŠå±€éƒ¨æ•°ç»„ç§»åˆ°ç±»å˜é‡ï¼Œè¿™ç§å¸¸æ•°ä¼˜åŒ–ACäº†ã€‚
ä¸è¿‡è¿™ç§æŒ‰å› æ•°ä¼˜åŒ–çš„æ–¹å¼è¿˜æ˜¯å¾ˆå€¼å¾—å­¦ä¹ çš„ï¼Œå¯ä»¥æŠŠè·å¾—å› æ•°çš„å¤æ‚åº¦ä»O(sqrt(num))é™ä¸ºO(log num)ï¼šhttps://leetcode.com/problems/gcd-sort-of-an-array/discuss/1445180/C%2B%2BPython-Union-Find-and-Sieve-and-Sorting-Clean-and-Concise

```cpp
class Solution {
    class UF {
public:
    vector<int> sz;
    int n;
    int comp_cnt;
    vector<int> fa;
public:
    UF(int _n): n(_n), comp_cnt(_n), fa(_n), sz(_n, 1) {
        iota(fa.begin(), fa.end(), 0);
    }
    
    int findset(int x) {
        return fa[x] == x ? x : fa[x] = findset(fa[x]);
    }
    
    void unite(int x, int y) {
        x = findset(x);
        y = findset(y);
        if (x != y) {
            if (sz[x] < sz[y]) {
                swap(x, y);
            }
            fa[y] = x;
            sz[x] += sz[y];
            --comp_cnt;
        }
    }
    
    bool connected(int x, int y) {
        x = findset(x);
        y = findset(y);
        return x == y;
    }
};
    using pii = pair<int, int>;
    array<pii, 50000> index;
    array<int, 50000> reverseIndex;
    array<bool, 50000> visited;

public:
    bool gcdSort(vector<int>& nums) {
        // time: n log n + n ^ 2
        // (10**5)**0.5
        // = 316.22776601683796
        const int n = nums.size();
        for (int i = 0; i < n; ++i) {
            index[i] = {nums[i], i};
        }
        sort(index.begin(), index.begin() + n);
        for (int i = 0; i < n; ++i) {
            reverseIndex[index[i].second] = i;
        }
        const int maxX = *max_element(nums.begin(), nums.end());
        UF uf(n + maxX + 10);
        for (int a = 0; a < n; ++a) {
            uf.unite(a, n + nums[a]);
            for (int b = 2; b * b <= nums[a]; ++b) {
                if (nums[a] % b == 0) {
                    uf.unite(a, n + b);
                    // æœ‰å¯èƒ½æ˜¯å€æ•°
                    if ((nums[a] / b) > 1) uf.unite(a, n + (nums[a] / b)); 
                }
            }
        }
        // N ^ 2, TLE
        // for (int a = 0; a < n; ++a) {
        //     for (int b = a + 1; b < n; ++b) {
        //         if (gcd(nums[a], nums[b]) > 1) {
        //             uf.unite(a, b);
        //         }
        //     }
        // }
        for (int i = 0; i < n; ++i) {
            visited[i] = false;
        }
        for (int i = 0; i < n; ++i) {
            if (!visited[i]) {
                vector<int> group;
                while (!visited[i]) {
                    visited[i] = true;
                    group.push_back(i);
                    i = reverseIndex[i];
                }
                const int root = uf.findset(group[0]);
                for (int i = 1; i < group.size(); ++i) {
                    if (root != uf.findset(group[i])) {
                        return false;
                    }
                }
            }
        }
        return true;
    }
};
```

æ—¶é—´å¤æ‚åº¦: O(N * sqrt(N) + N log N),
ç©ºé—´å¤æ‚åº¦: O(N + max(nums[i])).